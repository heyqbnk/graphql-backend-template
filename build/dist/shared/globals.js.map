{"version":3,"sources":["dist/shared/globals.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;AAAA,4BAA0B;AAC1B,kDAA0B;AAC1B,uFAA+D;AAC/D,2DAAmC;AACnC,qDAA6C;AAC7C,mCAAiC;AACjC,qDAAuC;AACvC,uDAAmD;AACnD,4CAAuC;AACvC,gDAAwB;AAExB;;;;GAIG;AAEH,qBAAqB;AACrB,IAAI,eAAM,CAAC,SAAS,KAAK,IAAI,EAAE;IAC7B,MAAM,EAAC,SAAS,EAAE,MAAM,EAAE,OAAO,EAAC,GAAG,eAAM,CAAC;IAE5C,MAAM,CAAC,IAAI,CAAC;QACV,gBAAgB,EAAE,IAAI;QACtB,GAAG,EAAE,SAAS;QACd,cAAc,EAAE,EAAE;QAClB,WAAW,EAAE,MAAM;QACnB,OAAO;QACP,gBAAgB,EAAE,CAAC;QACnB,eAAe,EAAE,IAAI;QACrB,YAAY,EAAE,CAAC,IAAI,4BAAa,CAAC;gBAC/B,sEAAsE;gBACtE,8BAA8B;gBAC9B,IAAI,EAAE,cAAI,CAAC,OAAO,CAAC,SAAS,EAAE,OAAO,CAAC;aACvC,CAAC,CAAC;KACJ,CAAC,CAAC;IACH,MAAM,CAAC,MAAM,CAAC,cAAc,EAAE,OAAO,CAAC,OAAO,CAAC,CAAC;CAChD;AAED,wCAAwC;AACxC,8BAAY,CAAC,kBAAS,CAAC,CAAC;AAExB,wEAAwE;AACxE,oCAAoC;AACpC,eAAK,CAAC,MAAM,CAAC,aAAG,CAAC,CAAC;AAClB,eAAK,CAAC,MAAM,CAAC,2BAAiB,CAAC,CAAC","file":"globals.js","sourcesContent":["import 'reflect-metadata';\r\nimport dayjs from 'dayjs';\r\nimport customParseFormat from 'dayjs/plugin/customParseFormat';\r\nimport utc from 'dayjs/plugin/utc';\r\nimport {useContainer} from 'class-validator';\r\nimport {Container} from 'typedi';\r\nimport * as Sentry from '@sentry/node';\r\nimport {RewriteFrames} from '@sentry/integrations';\r\nimport {config} from '~/shared/config';\r\nimport path from 'path';\r\n\r\n/**\r\n * This files is required part of application. It applies difference project\r\n * life required things such as initializing Sentry, configuring\r\n * class-validator and dayjs module.\r\n */\r\n\r\n// Initialize sentry.\r\nif (config.sentryDsn !== null) {\r\n  const {sentryDsn, appEnv, release} = config;\r\n\r\n  Sentry.init({\r\n    attachStacktrace: true,\r\n    dsn: sentryDsn,\r\n    maxBreadcrumbs: 30,\r\n    environment: appEnv,\r\n    release,\r\n    tracesSampleRate: 1,\r\n    shutdownTimeout: 1000,\r\n    integrations: [new RewriteFrames({\r\n      // In production, to make source maps work, it is required to set root\r\n      // referencing to dist folder.\r\n      root: path.resolve(__dirname, '../..')\r\n    })],\r\n  });\r\n  Sentry.setTag('Node Version', process.version);\r\n}\r\n\r\n// Replace container in class-validator.\r\nuseContainer(Container);\r\n\r\n// Extend dayjs with useful plugins which can be handy not to make it in\r\n// each file where plugins are used.\r\ndayjs.extend(utc);\r\ndayjs.extend(customParseFormat);\r\n"],"sourceRoot":"/"}